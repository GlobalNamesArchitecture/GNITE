<% content_for :header do %>
  <div class="tree_list_header clearfix">
    <div class="tree_list_header_inner clearfix">
      <h1><%= @merge_event.memo %></h1>
      <div id="tree-return" class="tree-link clearfix">
        <a href="<%= master_tree_path(:id => @master_tree.id) %>"><span>View Master Tree</span></a>
      </div>
    </div>
  </div>
<% end %>

<div id="merge-results-wrapper">
  <%= form_tag(:autocomplete => "off", :only_path => true) do %>
    <div class="ui-tabs ui-widget ui-widget-content ui-corner-all">

    <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
      <% @data.sort.reverse.each do |key, data| %>
        <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#<%= key %>-tab"><%= key %> (<%= @data[key].count %>)</a></li>
      <% end %>
      <% if @data[:new_matches].any? %>
        <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#new-tab">New Names (<%= @data[:new_matches].count %>)</a></li>
      <% end %>
      <% if @data[:exact_matches].any? %>
        <li class="ui-state-default ui-corner-top"><a href="#exact-tab">Exact Matches (<%= @data[:exact_matches].count %>)</a></li>
      <% end %>
      <% if @data[:fuzzy_matches].any? %>
        <li class="ui-state-default ui-corner-top"><a href="#fuzzy-tab">Fuzzy Matches (<%= @data[:fuzzy_matches].count %>)</a></li>
      <% end %>
    </ul>

     <% @data.each do |match| %>

     <% end %>

    </div>

  <%= submit_tag "Execute", :class => "green-submit submit" %>
  <% end -%>
</div>

<% content_for :javascript do %>
  <%= javascript_include_tag 'juggernaut/json', 'juggernaut/socket_io', 'juggernaut/juggernaut', 'jquery.spinner', 'merge' %>

  <script type="text/javascript">
  <!--//--><![CDATA[//><!--
  jQuery.extend(GNITE.Tree.MasterTree, { "id" : "<%= @master_tree.id %>", "merge_event" : "<%= @merge_event.id %>", "merge_status" : "<%= @merge_event.status %>" });
  </script>
<% end %>